!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="//s3.pstatp.com/bytecom/union-sdk-fe/",t(t.s=15)}([function(e,t){e.exports=function(e){function t(e){"undefined"!=typeof console&&(console.error||console.log)("[Script Loader]",e)}try{"undefined"!=typeof execScript&&function(){return"undefined"!=typeof attachEvent&&"undefined"==typeof addEventListener}()?execScript(e):"undefined"!=typeof eval?eval.call(null,e):t("EvalError: No eval function available")}catch(e){t(e)}}},,,,,,,,,,,,,,,function(e,t,n){"use strict";n(16);var o=n(17),r=function(e){return e&&e.__esModule?e:{default:e}}(o);window._tt_config=!0;var i=window.ToutiaoJSBridge,a=r.default.isAndroid,c=r.default.sendEvent,u=r.default.getAdInfo,d=function(e){for(var t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o++){var r=n[o].split("=");if(r[0]==e)return r[1]}return null}("toutiao_card_params"),s=d?JSON.parse(window.decodeURIComponent(d)):{};({openAppStore:function(){a()?i.call("download_app_ad",{data:this.packageInfo}):i.call("open_app_store")},packageInfo:{id:s.id,pkg_name:s.pkg_name,download_url:s.download_url,name:s.name,source:"recommend",from_page:"endcard",card_type:"3",extra:{page:"endcard",position:-1,app_type:-1,content_type:"card",os_type:a()?"android":"ios"}},init:function(){var e=this;u(),a()&&i.call("subscribe_app_ad",{data:this.packageInfo}),window.openAppStore=function(){if(0!==Object.keys(s).length)if(c(void 0,"click_start_endcard"),c(void 0,"click"),s.download_url)e.openAppStore();else if(s.external_url)try{i.call("landscape_click"),window.location.href=s.external_url}catch(e){window.location.href=s.external_url}}}}).init()},function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function e(e){if(void 0===e)return e;var t,n,o,r,i,a;for(o=e.length,n=0,t="";o>n;){if(r=255&e.charCodeAt(n++),n===o){t+=m.charAt(r>>2),t+=m.charAt((3&r)<<4),t+="==";break}if(i=e.charCodeAt(n++),n===o){t+=m.charAt(r>>2),t+=m.charAt((3&r)<<4|(240&i)>>4),t+=m.charAt((15&i)<<2),t+="=";break}a=e.charCodeAt(n++),t+=m.charAt(r>>2),t+=m.charAt((3&r)<<4|(240&i)>>4),t+=m.charAt((15&i)<<2|(192&a)>>6),t+=m.charAt(63&a)}return t}function t(e){for(var t in e)return!1;return!0}function n(e,n){if("share"===e){if(n&&!t(n))return n;var o="",r="",i="",a=document.querySelector("title"),c=document.querySelector("meta[name=description]"),u=document.querySelector("link[rel*=apple-touch-icon]"),d=document.querySelector("link[rel*=shortcut]");if(a&&(o=a.innerText),c&&(r=c.content),d&&(i=d.href),u&&(i=u.href),!i)for(var s=document.querySelectorAll("body img"),f=0;f<s.length;f++){var l=s[f];if(l.naturalWidth>100&&l.naturalHeight>100){i=l.src;break}}return{platform:"weixin_moments",url:location.href,title:o,desc:r,image:i}}return n}function r(e,t){var n=document.getElementById(e);n&&"IFRAME"===n.tagName&&n.parentNode?n.src=t:(n=document.createElement("iframe"),n.id=e,n.style.display="none",document.documentElement.appendChild(n),n.src=t)}function i(){var e=JSON.stringify(h);return h=[],c("SCENE_FETCHQUEUE",e),e}function a(e){var t,n=e.__msg_type,o=e.__params,r=e.__event_id,i=e.__callback_id;return"callback"===n?(t={__err_code:"cb404"},"string"==typeof i&&"function"==typeof v[i]&&(t=v[i](o),delete v[i])):"event"===n&&(t={__err_code:"ev404"},"string"==typeof r&&"function"==typeof g[r]&&(t=g[r](o))),c("SCENE_HANDLEMSGFROMTT",JSON.stringify(t)),JSON.stringify(t)}function c(t,n){r("__ToutiaoJSBridgeIframe_SetResult",y+"private/setresult/"+t+"&"+e(p.encode(n)))}function u(e,t,i,a){if(a=a||1,e&&"string"==typeof e){"object"!=(void 0===t?"undefined":o(t))&&(t={}),t=n(e,t);var c=(_++).toString();"function"==typeof i&&(v[c]=i);var u={JSSDK:a,func:e,params:t,__msg_type:"call",__callback_id:c,__ts:Date.now()};h.push(u),r("__ToutiaoJSBridgeIframe",y+"dispatch_message/")}}function d(e,t){e&&"string"==typeof e&&"function"==typeof t&&(g[e]=t,u("addEventListener",{name:e},null))}function s(e,t){"function"==typeof g[e]&&g[e](t)}var f,l,p={encode:function(e){e=e||"",e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);128>o?t+=String.fromCharCode(o):o>127&&2048>o?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},decode:function(e){for(var t="",n=0,o=0,r=0,i=0;n<e.length;)i=e.charCodeAt(n),128>i?(t+=String.fromCharCode(i),n++):i>191&&224>i?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&o),n+=2):(o=e.charCodeAt(n+1),r=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&r),n+=3);return t}},m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=[],_=1e3,v={},g={},y="bytedance://";"object"==o(window.toutiao)&&"object"==o(window.ToutiaoJSBridge)||(function(){l=document.createElement("iframe"),l.id="__ToutiaoJSBridgeIframe_SetResult",l.style.display="none",document.documentElement.appendChild(l),f=document.createElement("iframe"),f.id="__ToutiaoJSBridgeIframe",f.style.display="none",document.documentElement.appendChild(f)}(),window.ToutiaoJSBridge={on:d,call:u,_fetchQueue:i,_handleMessageFromToutiao:a},window.toutiao={on:d,trigger:s},function(){function e(e,t){return"params"===t?e:e[t]}var n={pageStateChange:"page_state_change",isVisible:"is_visible",isLogin:"is_login",uploadImage:"upload_image"},o=["appInfo","adInfo","login","comment","close","isVisible","isLogin","playVideo","formDialogClose"],r=["isAppInstalled","open","share","systemShare","pay","pageStateChange","downloadApp","openThirdApp","uploadImage","addChannel","gallery","copyToClipboard","openCocosPlay","callNativePhone"],i=o.concat(r),a=navigator.userAgent.match(/JSSDK\/([\d.]+)/i),c=a?a[1]:1;a?i=i.concat(["config"]):window.toutiao.config=function(t){var n=e(t,"success");return n?n({code:1,supportList:{call:o}}):void 0},i.forEach(function(o){window.toutiao[o]=function(r){r=r||{};var i=e(r,"params"),a=e(r,"error"),d=e(r,"success"),s=e(r,"fail");o=n[o]||o,u(o,i,function(e){e=e||{};var n=e.code;t(e)?n=1:void 0===n&&(n=1),-1===n&&a&&a(e),0===n&&s&&s(e),1===n&&d&&d(e)},c)}})}())}()},function(e,t,n){"use strict";function o(){return s&&s instanceof Promise||(s=window.ToutiaoJSBridge?new Promise(function(e){var t=setTimeout(function(){return e({})},3e3);window.ToutiaoJSBridge.call("adInfo",{},function(n){clearTimeout(t),"string"==typeof n&&(n=JSON.parse(n)),"string"==typeof n.log_extra&&(n.log_extra=JSON.parse(n.log_extra));var o=n,r=o.cid,i=o.ad_id,a=o.log_extra,c=a.req_id,u=a.convert_id;e({category:"app_union",is_ad_event:"1",cid:r,req_id:c,convert_id:u,ad_id:i,log_extra:a})})}):Promise.reject(new Error("Need ToutiaoJSBridge"))),s}function r(e,t,n){var o="";o=d()||u()?"log_event":"custom_event";var r="";n&&Object.keys(n).forEach(function(e){var t=n[e];r="extra"===e&&"object"===(void 0===t?"undefined":c(t))?"&extra="+encodeURIComponent(JSON.stringify(t)):"&"+e+"="+encodeURIComponent(t)});var i="bytedance://"+o+"?category=app_union&tag="+e+"&label="+t+r;try{window.webkit.messageHandlers.observe.postMessage(i)}catch(e){console.log(i)}}function i(e){for(var t=0,n=arguments.length<=1?0:arguments.length-1;t<n;t+=1){var o=arguments.length<=t+1?void 0:arguments[t+1];Object.assign(e,o)}}function a(e,t,n){return o().then(function(o){var i=e||"embeded_ad",a=JSON.parse(JSON.stringify(o));a.log_extra=a.log_extra||{},n&&(a.ad_extra_data=JSON.stringify(n)),a.log_extra=JSON.stringify(a.log_extra);var c=o.cid||o.ad_id;a.value=c?+c:0,a.tag=i,a.is_ad_event="1",r(i,t,{extra:a})})}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n(18);var u=function(){return navigator.userAgent.match(/(Android)\s+([\d.]+)/)},d=function(){return/(joke_essay|Joke)( |\/|_)(\d.\d.\d)/i.test(navigator.userAgent)},s=null;t.default={getAdInfo:o,isAndroid:u,isJoke:d,extend:i,sendEvent:a}},function(e,t,n){"use strict";n(0)(n(19))},function(e,t){e.exports='function Promise(e){if(!(this instanceof Promise))throw new TypeError("Constructor Promise requires `new`");if(!isFunction(e))throw new TypeError("Must pass resolver function");this._state=PendingPromise,this._value=[],this._isChainEnd=!0,doResolve(this,adopter(this,FulfilledPromise),adopter(this,RejectedPromise),{then:e})}function FulfilledPromise(e,n,t,r){return n?(r||(r=new Deferred(this.constructor)),defer(tryCatchDeferred(r,n,e)),r.promise):(deferredAdopt(r,FulfilledPromise,e),this)}function RejectedPromise(e,n,t,r){return t?(r||(r=new Deferred(this.constructor)),defer(tryCatchDeferred(r,t,e)),r.promise):(deferredAdopt(r,RejectedPromise,e),this)}function PendingPromise(e,n,t,r){if(!r){if(!n&&!t)return this;r=new Deferred(this.constructor)}return e.push({deferred:r,onFulfilled:n||r.resolve,onRejected:t||r.reject}),r.promise}function Deferred(e){var n=this;return this.promise=new e(function(e,t){n.resolve=e,n.reject=t}),n}function adopt(e,n,t,r){var o=e._value;e._state=n,e._value=t,r&&n===PendingPromise&&r._state(t,void 0,void 0,{promise:e,resolve:void 0,reject:void 0});for(var i=0;i<o.length;i++){var s=o[i];e._state(t,s.onFulfilled,s.onRejected,s.deferred)}o.length=0,n===RejectedPromise&&e._isChainEnd&&setTimeout(function(){e._isChainEnd&&onPossiblyUnhandledRejection(t,e)},0)}function adopter(e,n){return function(t){adopt(e,n,t)}}function deferredAdopt(e,n,t){if(e){var r=e.promise;r._state=n,r._value=t}}function noop(){}function isFunction(e){return"function"==typeof e}function isObject(e){return e===Object(e)}function each(e,n){for(var t=0;t<e.length;t++)n(e[t],t)}function tryCatchDeferred(e,n,t){var r=e.promise,o=e.resolve,i=e.reject;return function(){try{var e=n(t);doResolve(r,o,i,e,e)}catch(e){i(e)}}}function doResolve(e,n,t,r,o){var i,s,c=t;try{if(r===e)throw new TypeError("Cannot fulfill promise with itself");var u=isObject(r);u&&r instanceof e.constructor?adopt(e,r._state,r._value,r):u&&(i=r.then)&&isFunction(i)?(s=function(r){s=c=noop,doResolve(e,n,t,r,r)},c=function(e){s=c=noop,t(e)},i.call(o,function(e){s(e)},function(e){c(e)})):n(r)}catch(e){c(e)}}Promise.prototype.then=function(e,n){return e=isFunction(e)?e:void 0,n=isFunction(n)?n:void 0,(e||n)&&(this._isChainEnd=!1),this._state(this._value,e,n)},Promise.prototype.catch=function(e){return this.then(void 0,e)},Promise.resolve=function(e){var n=this;return isObject(e)&&e instanceof this?e:new n(function(n){n(e)})},Promise.reject=function(e){return new this(function(n,t){t(e)})},Promise.all=function(e){var n=this;return new n(function(t,r){var o=e.length,i=new Array(o);if(0===o)return t(i);each(e,function(e,s){n.resolve(e).then(function(e){i[s]=e,0==--o&&t(i)},r)})})},Promise.race=function(e){var n=this;return new n(function(t,r){for(var o=0;o<e.length;o++)n.resolve(e[o]).then(t,r)})};var onPossiblyUnhandledRejection=function(e,n){throw e};Promise._overrideUnhandledExceptionHandler=function(e){onPossiblyUnhandledRejection=e};var defer=function(){function e(){for(var e=0;e<r;e++){var n=t[e];t[e]=null,n()}r=0}var n;"undefined"!=typeof window&&window.postMessage?(window.addEventListener("message",e),n=function(){window.postMessage("macro-task","*")}):n=function(){setTimeout(e,0)};var t=new Array(16),r=0;return function(e){0===r&&n(),t[r++]=e}}();'}]);